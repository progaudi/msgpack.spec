steps:
- task: DotNetCoreCLI@2
  displayName: dotnet build
  inputs:
    command: build
    projects: msgpack.spec.sln
    arguments: -c Release
    verbosityRestore: minimal

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: net46
  condition: eq(variables['Agent.OS'], 'Windows_NT')

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: net461
  condition: eq(variables['Agent.OS'], 'Windows_NT')

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: net462
  condition: eq(variables['Agent.OS'], 'Windows_NT')

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: net47
  condition: eq(variables['Agent.OS'], 'Windows_NT')

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: net471
  condition: eq(variables['Agent.OS'], 'Windows_NT')

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: netcoreapp1.0
    frameworkGlobal: false

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: netcoreapp1.1
    frameworkGlobal: false

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: netcoreapp2.0

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: netcoreapp2.1

- template: test.yml
  parameters:
    path: tests/msgpack.spec.tests/msgpack.spec.tests.csproj
    framework: netcoreapp2.2
